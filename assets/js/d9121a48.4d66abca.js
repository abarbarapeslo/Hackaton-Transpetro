"use strict";(self.webpackChunkhackathon_transpetro=self.webpackChunkhackathon_transpetro||[]).push([[665],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},8801:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"proposito_solucao/modelagem_dados","title":"Modelagem dos Dados","description":"Introduction","source":"@site/docs/proposito_solucao/modelagem_dados.md","sourceDirName":"proposito_solucao","slug":"/proposito_solucao/modelagem_dados","permalink":"/Hackaton-Transpetro/proposito_solucao/modelagem_dados","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Modelagem dos Dados"},"sidebar":"defaultSidebar","previous":{"title":"Fluxo de Dados","permalink":"/Hackaton-Transpetro/proposito_solucao/fluxo_dados"},"next":{"title":"Identidade Visual","permalink":"/Hackaton-Transpetro/proposito_solucao/identidade_visual"}}');var t=s(4848),r=s(8453);const l={sidebar_position:5,title:"Modelagem dos Dados"},a=void 0,o={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Detailing Entities and Relationships",id:"detailing-entities-and-relationships",level:2},{value:"Tabela: <code>usuarios</code> (Users)",id:"tabela-usuarios-users",level:3},{value:"Tabela: <code>carteiras</code> (Wallets)",id:"tabela-carteiras-wallets",level:3},{value:"Tabela: <code>cprs</code> (Rural Product Bills)",id:"tabela-cprs-rural-product-bills",level:3},{value:"Tabela: <code>parcelas</code> (Installments)",id:"tabela-parcelas-installments",level:3},{value:"Tabela: <code>investimentos</code> (Investments)",id:"tabela-investimentos-investments",level:3},{value:"Tabela: <code>transacoes</code> (Transactions)",id:"tabela-transacoes-transactions",level:3},{value:"Tabela: <code>ofertas_secundario</code> (Secondary Offers)",id:"tabela-ofertas_secundario-secondary-offers",level:3},{value:"Tabela: <code>contas_bancarias</code> (Bank Accounts)",id:"tabela-contas_bancarias-bank-accounts",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"\u2003 The database is the pillar of any robust application, especially in a project like Reevo, where data integrity, security, and consistency are paramount. For the transactional core of our system, we opted for a relational database."}),"\n",(0,t.jsxs)(n.p,{children:["\u2003This choice is due to its compliance with ",(0,t.jsx)(n.strong,{children:"ACID (Atomicity, Consistency, Isolation, and Durability)"})," properties, which ensure that complex financial operations (such as an investment or a payment distribution) are either entirely completed successfully or entirely rolled back, never leaving the data in an inconsistent state."]}),"\n",(0,t.jsx)(n.p,{children:"The diagram below illustrates the main entities of our system and how they interconnect to model the Reevo business."}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.h2,{id:"detailing-entities-and-relationships",children:"Detailing Entities and Relationships"}),"\n",(0,t.jsx)(n.p,{children:"\u2003 Below, we justify the existence and structure of each table, focusing on their keys and the relationships they establish."}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-usuarios-users",children:["Tabela: ",(0,t.jsx)(n.code,{children:"usuarios"})," (Users)"]}),"\n",(0,t.jsxs)(n.p,{children:["This is the central identity table. It stores the login and profile information of all platform participants, whether they are FARMERS or INVESTORS. The ",(0,t.jsx)(n.code,{children:"perfil"})," (profile) column distinguishes their roles and the functionalities they can access."]}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID). It is the unique internal identifier for each user, used to relate them to all other tables."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Relationships:"})," This table is the starting point for most relationships. A user can request multiple ",(0,t.jsx)(n.code,{children:"cprs"}),", make multiple ",(0,t.jsx)(n.code,{children:"investimentos"}),", and register multiple ",(0,t.jsx)(n.code,{children:"contas_bancarias"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-carteiras-wallets",children:["Tabela: ",(0,t.jsx)(n.code,{children:"carteiras"})," (Wallets)"]}),"\n",(0,t.jsxs)(n.p,{children:["Represents the digital wallet of each user on the platform, where their stablecoin balances (USDC) are maintained and managed. The separation between ",(0,t.jsx)(n.code,{children:"saldo_usdc"})," (available balance) and ",(0,t.jsx)(n.code,{children:"saldo_bloqueado_usdc"})," (locked balance) is crucial for managing funds that are committed to a transaction (like an in-progress investment) but have not yet been debited."]}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Foreign Key (FK):"})," ",(0,t.jsx)(n.code,{children:"usuario_id"})," references ",(0,t.jsx)(n.code,{children:"usuarios(id)"}),". The ",(0,t.jsx)(n.code,{children:"UNIQUE"})," constraint on this key ensures a one-to-one relationship, guaranteeing that each user has exactly one wallet."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-cprs-rural-product-bills",children:["Tabela: ",(0,t.jsx)(n.code,{children:"cprs"})," (Rural Product Bills)"]}),"\n",(0,t.jsx)(n.p,{children:"Models the investment opportunity. Each row represents a credit request made by a farmer that has been approved and is ready for fundraising in the marketplace. It contains all the loan terms, such as value, interest rate, and term."}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Foreign Key (FK):"})," ",(0,t.jsx)(n.code,{children:"agricultor_id"})," references ",(0,t.jsx)(n.code,{children:"usuarios(id)"}),", creating a one-to-many relationship (one farmer can have several CPRs over time)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-parcelas-installments",children:["Tabela: ",(0,t.jsx)(n.code,{children:"parcelas"})," (Installments)"]}),"\n",(0,t.jsx)(n.p,{children:"Details the payment schedule for a CPR. When a CPR is created, this table is populated with all future installments, their values, and due dates. This is fundamental for payment and default management."}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Foreign Key (FK):"})," ",(0,t.jsx)(n.code,{children:"cpr_id"})," references ",(0,t.jsx)(n.code,{children:"cprs(id)"}),", creating a one-to-many relationship (one CPR is composed of multiple installments)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-investimentos-investments",children:["Tabela: ",(0,t.jsx)(n.code,{children:"investimentos"})," (Investments)"]}),"\n",(0,t.jsxs)(n.p,{children:["This is a crucial linking table that materializes the many-to-many relationship between ",(0,t.jsx)(n.code,{children:"usuarios"})," (investors) and ",(0,t.jsx)(n.code,{children:"cprs"}),". Each row means a specific investor allocated a certain value to a specific CPR."]}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Foreign Keys (FK):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"investidor_id"})," references ",(0,t.jsx)(n.code,{children:"usuarios(id)"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"cpr_id"})," references ",(0,t.jsx)(n.code,{children:"cprs(id)"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-transacoes-transactions",children:["Tabela: ",(0,t.jsx)(n.code,{children:"transacoes"})," (Transactions)"]}),"\n",(0,t.jsxs)(n.p,{children:["Functions as the ",(0,t.jsx)(n.strong,{children:"ledger"})," (book of record) for all financial movements on the platform. Whether it's a deposit, withdrawal, investment, or interest receipt, every operation generates an ",(0,t.jsx)(n.strong,{children:"immutable record"})," in this table, ensuring total traceability and auditability."]}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Foreign Key (FK):"})," ",(0,t.jsx)(n.code,{children:"carteira_id"})," references ",(0,t.jsx)(n.code,{children:"carteiras(id)"}),", linking each transaction to a specific wallet."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-ofertas_secundario-secondary-offers",children:["Tabela: ",(0,t.jsx)(n.code,{children:"ofertas_secundario"})," (Secondary Offers)"]}),"\n",(0,t.jsxs)(n.p,{children:["Models the sell offers in the ",(0,t.jsx)(n.strong,{children:"secondary market"}),". When an investor decides to sell their share (their investment), a row is created here with the selling price. This allows the platform to function as a P2P trading environment."]}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Foreign Key (FK):"})," ",(0,t.jsx)(n.code,{children:"investimento_id"})," references ",(0,t.jsx)(n.code,{children:"investimentos(id)"}),". The ",(0,t.jsx)(n.code,{children:"UNIQUE"})," constraint on this key ensures that the same investment cannot have more than one active sell offer at the same time."]}),"\n",(0,t.jsxs)(n.h3,{id:"tabela-contas_bancarias-bank-accounts",children:["Tabela: ",(0,t.jsx)(n.code,{children:"contas_bancarias"})," (Bank Accounts)"]}),"\n",(0,t.jsxs)(n.p,{children:["Stores users' bank details securely for withdrawal operations (",(0,t.jsx)(n.strong,{children:"off-ramp"}),") via Pix. Keeping this in a separate table allows a user to have multiple registered accounts and choose a primary one."]}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Simple Entity-Relationship Diagram (ERD)"}),"\n",(0,t.jsx)("div",{style:{margin:15},children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:"/img/nome.png",style:{width:1024},alt:"Credit Request and Approval Flow"}),(0,t.jsx)("br",{})]})}),"\n",(0,t.jsx)("p",{style:{textAlign:"center"},children:" Source: Produced by the authors (2025)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Keys and Relationships:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Primary Key (PK):"})," ",(0,t.jsx)(n.code,{children:"id"})," (UUID)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Foreign Key (FK):"})," ",(0,t.jsx)(n.code,{children:"usuario_id"})," references ",(0,t.jsx)(n.code,{children:"usuarios(id)"}),", creating a one-to-many relationship."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);